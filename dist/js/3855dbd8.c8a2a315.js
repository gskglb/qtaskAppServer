(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["3855dbd8"],{"327d":function(e,t,n){"use strict";var i=n("a540"),s=n.n(i);s.a},a540:function(e,t,n){},fd5f:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-page",{staticClass:"flex flex-center bg-grey-2"},[n("q-card",{staticClass:"my-card",attrs:{bordered:""}},[n("q-card-section",[n("div",{staticClass:"text-h6"},[e._v("Phone Login")])]),n("q-card-section",[n("div",{staticClass:"q-pa-xs no-warp",staticStyle:{"max-width":"400px"}},[n("q-form",{staticClass:"q-gutter-md",on:{submit:e.onPhoneSubmit}},[n("q-input",{attrs:{label:"Your Phone  *",hint:"Enter + countrycode and mobile number e.g. +91xxxxxxxxxx","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please enter mobile number e.g. +91xxxxxxxxxx"}]},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}),n("div",[n("q-btn",{staticClass:"q-mb-md",attrs:{label:"Request OTP",id:"recaptchVerifier",size:"md",outline:"",loading:e.submitting,type:"submit",color:"secondary"},scopedSlots:e._u([{key:"loading",fn:function(){return[n("q-spinner-facebook")]},proxy:!0}])})],1)],1),n("q-form",{staticClass:"q-gutter-md",on:{submit:e.onSubmit,reset:e.onReset}},[n("q-input",{attrs:{type:"number",label:"OTP *","lazy-rules":"",rules:[function(e){return null!==e&&""!==e||"You need to enter OTP"}]},model:{value:e.otp,callback:function(t){e.otp=t},expression:"otp"}}),n("div",[n("q-btn",{attrs:{label:"Submit",disable:!e.OTPRecieved,size:"md",type:"submit",color:"primary"}}),n("q-btn",{staticClass:"q-ml-sm",attrs:{label:"Reset",disable:!e.OTPRecieved,size:"md",type:"reset",color:"primary",flat:""}})],1)],1)],1)])],1)],1)},s=[],a=(n("7f7f"),n("a34a")),r=n.n(a),o=(n("96cf"),n("c973")),c=n.n(o),l=n("e669"),u={components:{QSpinnerFacebook:l["a"]},data:function(){return{phone:"+919704038269",otp:"",accept:!1,submitting:!1,recaptchaVerifier:null,confirmationResultHolder:null,OTPRecieved:!1}},methods:{onPhoneSubmit:function(){var e=c()(r.a.mark(function e(){var t,n,i=this;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.submitting=!0,t=this,n=this.phone,this.$auth.signInWithPhoneNumber(n,this.recaptchaVerifier).then(function(e){i.$q.notify({color:"green-4",textColor:"white",icon:"fas fa-check-circle",message:"OTP Sent"}),t.confirmationResultHolder=e,t.OTPRecieved=!0,t.submitting=!1}).catch(function(e){i.$q.notify({color:"red",textColor:"white",message:e.message}),i.submitting=!1});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),onSubmit:function(){var e=this,t=this.$store,n={},i=this.$router;this.confirmationResultHolder.confirm(this.otp).then(function(s){null!==s.user&&(n.phoneNumber=s.user.phoneNumber,e.$db.ref("/profiles/"+e.$auth.currentUser.uid+"/").once("value").then(function(e){console.log(e.val()),null!==e.val()&&"undefined"!==e.val().displayName&&null!==e.val().displayName?(n.displayName=e.val().displayName,i.push("home")):i.push("profile"),t.dispatch("user/setUser",n)}))}).catch(function(t){e.$q.notify({message:t.message})})},onReset:function(){this.name=null,this.age=null,this.accept=!1}},mounted:function(){this.recaptchaVerifier=new this.$firebase.auth.RecaptchaVerifier("recaptchVerifier",{size:"invisible",callback:function(e){},"expired-callback":function(){this.$q.notify({message:"Captcha expired",type:"negative"})}})}},h=u,p=(n("327d"),n("2877")),d=Object(p["a"])(h,i,s,!1,null,"085dfaea",null);t["default"]=d.exports}}]);