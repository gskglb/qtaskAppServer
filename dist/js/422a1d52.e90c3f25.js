(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["422a1d52"],{ba75:function(e,t,i){"use strict";var s=i("ef85"),n=i.n(s);n.a},ef85:function(e,t,i){},fd5f:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-page",{staticClass:"flex flex-center bg-grey-9"},[i("q-card",{staticClass:"bg-grey-10 q-ma-sm",attrs:{dark:"","text-color":"white",flat:"",square:""}},[i("q-card-section",[i("div",{staticClass:"text-h6"},[e._v("Phone Login")])]),i("q-card-section",[i("div",{staticClass:"q-pa-xs no-warp",staticStyle:{"max-width":"400px"}},[i("q-form",{staticClass:"q-gutter-md",attrs:{dark:""},on:{submit:e.onPhoneSubmit,reset:e.onReset}},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-3"},[i("q-input",{attrs:{dark:"",label:"Country *","lazy-rules":"",rules:[function(e){return e&&e.length>0||"e.g. +91"}]},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1),i("div",{staticClass:"col-1"}),i("div",{staticClass:"col-8"},[i("q-input",{attrs:{dark:"",label:"Your Phone  *","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please enter mobile number e.g. +91xxxxxxxxxx"}]},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1)]),i("div",{staticClass:"row"},[i("div",{staticClass:"col-8"},[i("q-btn",{staticClass:"q-mb-md",attrs:{label:"Request OTP",disable:e.OTPRecieved,id:"recaptchVerifier",size:"md",outline:"",loading:e.submitting,type:"submit",color:"secondary"},scopedSlots:e._u([{key:"loading",fn:function(){return[i("q-spinner-facebook")]},proxy:!0}])})],1),i("div",{staticClass:"col-4"},[i("q-btn",{staticClass:"q-ml-xs",attrs:{label:"Reset",size:"md",type:"reset",color:"primary",flat:"","no-caps":""}})],1)])]),i("q-form",{staticClass:"q-gutter-md",on:{submit:e.onSubmit}},[i("q-input",{attrs:{dark:"",type:"number",label:"OTP *","lazy-rules":"",disable:!e.OTPRecieved,rules:[function(e){return null!==e&&""!==e||"You need to enter OTP"}]},model:{value:e.otp,callback:function(t){e.otp=t},expression:"otp"}}),i("div",[i("q-btn",{attrs:{label:"Submit",disable:!e.OTPRecieved,size:"md",type:"submit",color:"primary"}})],1)],1)],1)])],1)],1)},n=[],a=i("a34a"),r=i.n(a),o=(i("96cf"),i("c973")),c=i.n(o),l=i("e669"),u={components:{QSpinnerFacebook:l["a"]},data:function(){return{code:"+91",phone:"9704038269",otp:"",accept:!1,submitting:!1,recaptchaVerifier:null,confirmationResultHolder:null,OTPRecieved:!1}},methods:{onPhoneSubmit:function(){var e=c()(r.a.mark(function e(){var t,i,s,n=this;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.submitting=!0,t=this,i=this.code,s=i+this.phone,!("+"!==i.charAt(0)||i.length<2)){e.next=9;break}return this.$q.notify({color:"red",textColor:"white",message:"Country Code looks incorrect"}),this.submitting=!1,this.recaptchaVerifier.reset(),e.abrupt("return");case 9:this.$auth.signInWithPhoneNumber(s,this.recaptchaVerifier).then(function(e){n.$q.notify({color:"green-4",textColor:"white",icon:"fas fa-check-circle",message:"OTP Sent"}),t.confirmationResultHolder=e,t.OTPRecieved=!0,t.submitting=!1}).catch(function(e){n.$q.notify({color:"red",textColor:"white",message:e.message}),n.submitting=!1,n.recaptchaVerifier.reset(),n.OTPRecieved=!1,n.otp=null});case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),onSubmit:function(){var e=this,t=this.$store,i={},s=this.$router;this.confirmationResultHolder.confirm(this.otp).then(function(n){null!==n.user&&(i.phoneNumber=n.user.phoneNumber,e.$db.ref("/profiles/"+e.$auth.currentUser.uid+"/").once("value").then(function(e){console.log(e.val()),null!==e.val()&&"undefined"!==e.val().displayName&&null!==e.val().displayName?(i.displayName=e.val().displayName,s.push("home")):s.push("profile"),t.dispatch("user/setUser",i)}))}).catch(function(t){e.$q.notify({message:t.message}),e.recaptchaVerifier.reset(),e.OTPRecieved=!1,e.otp=null})},onReset:function(){this.phone=null,this.OTPRecieved=!1}},mounted:function(){this.recaptchaVerifier=new this.$firebase.auth.RecaptchaVerifier("recaptchVerifier",{size:"invisible",callback:function(e){},"expired-callback":function(){this.$q.notify({message:"Captcha expired",type:"negative"})}})}},d=u,h=(i("ba75"),i("2877")),p=Object(h["a"])(d,s,n,!1,null,"3d5d4e48",null);t["default"]=p.exports}}]);